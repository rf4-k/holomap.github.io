<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<script src="js/jquery.min.js"></script>
<script src="js/openseadragon.js"></script>
<script src="js/openseadragon-bookmark-url.js"></script>
<script src="js/OpenSeadragonHTMLelements.js"></script>
<script src="js/openseadragon-imaginghelper.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="shortcut icon" href="images/favicon.ico" type="image/vnd.microsoft.icon">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-145408095-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-145408095-1');
</script>
<title>アベレーション</title>
</head><body>
<nav>
<ul>
<li class="current"><a href="./">アベレーション</a></li>
</ul>
<img src="images/center.gif">
</nav>
<main id="main"></main>
<script type="text/javascript">
	// 地図生成
	var viewer = OpenSeadragon({
		id: "main", 
		prefixUrl: "images/", 
		showNavigator: true, 
		tileSources: {
			Image: {
				xmlns:   "http://schemas.microsoft.com/deepzoom/2008",
				Url:  "aberration_tiles/",
				Format:   "jpg", 
				Overlap:  "2", 
				TileSize: "256",
				Size: {
					Height: "33600",
					Width:	"33600"
				}
			}
		}
	});

	// 座標URL表示
	viewer.bookmarkUrl();

	// 変化検知
	var imagingHelper = viewer.activateImagingHelper({onImageViewChanged: onImageViewChanged});
	function onImageViewChanged(event) {
		//alert(imagingHelper.getZoomFactor());
		if(imagingHelper.getZoomFactor() > 0.18){
			$("div.Marker>div:nth-of-type(2)").css('display','block');
		} else {
			$("div.Marker>div:nth-of-type(2)").css('display','none');
		}
	}

	// HTML要素追加
	var hEl = viewer.HTMLelements();

	var M = [];
	M[0] = document.createElement("div");
	M[0].className = "Marker";
	M[0].innerHTML = "<div><img src='images/marker_home.png' title='フブキング卿の拠点【X27、Y44】'></div><div><img src='https://image02.seesaawiki.jp/h/v/hololivetv/hJhJjoz8Cm.png'><br>フブキング卿の拠点<br>【X27、Y44】</div>";

	M[1] = document.createElement("div");
	M[1].className = "Marker";
	M[1].innerHTML = "<div><img src='images/marker_fort.png' title='まつり城【X29、Y44】'></div><div><img src='https://image01.seesaawiki.jp/h/v/hololivetv/dXF1amCTcN.png'><br>まつり城<br>【X29、Y44】</div>";



	hEl.addElement(
		{
			id: "M0",
			element: M[0],
			x: 520+332*27,
			y: 620+326*44,
			width: 800,
			height: 800,
			fontSize: 1
		}
	)
	hEl.addElement(
		{
			id: "M1",
			element: M[1],
			x: 520+332*29,
			y: 620+326*44,
			width: 800,
			height: 800,
			fontSize: 1
		}
	)

</script>
</body>
</html>